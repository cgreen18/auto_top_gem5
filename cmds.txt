# feb 11

./build/Garnet_standalone/gem5.opt --debug-flags RubyNetwork configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 10000 --injectionrate 0.01 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_naive_none.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_naive.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --garnet-deadlock-threshold 50000000 --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 4 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 3 --synth_traffic > qt.txt

./build/Garnet_standalone/gem5.opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 100000 --injectionrate 0.01 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_naive_none.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_naive.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --garnet-deadlock-threshold 50000000 --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 6 --evn_deadlock_partition 0 --evn_n_deadlock_free 2 --evn_min_n_deadlock_free 3 --synth_traffic --single-sender-id 0 --single-dest-id 16

./build/Garnet_standalone/gem5.opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 100000 --injectionrate 0.01 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --garnet-deadlock-threshold 50000000 --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 6 --evn_deadlock_partition 0 --evn_n_deadlock_free 2 --evn_min_n_deadlock_free 3 --synth_traffic  --inj-vnet -2



./build/Garnet_standalone/gem5.opt --debug-flags RubyNetwork configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 10000000 --injectionrate 0.1 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_none.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --garnet-deadlock-threshold 50000000 --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic > qt.txt



./build/Garnet_standalone/gem5.fast -d qt_1b configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 1000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_none.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --garnet-deadlock-threshold 50000000 --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic > qt.txt

./build/Garnet_standalone/gem5.fast -d qt_2b_lb configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic


./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic --debug-start 32000000 configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 50000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic > qt_opt.txt

./build/Garnet_standalone/gem5.opt -d qt_opt_s0 --debug-flags RubyNetwork,GarnetSyntheticTraffic --debug-start 32000000 configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 50000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --single-sender-id 0 > qt_opt_s0.txt

./build/Garnet_standalone/gem5.fast -d qt_fast configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 50000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2




# for isolating why VCs are not idle at beginning
./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 10000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 > qt_opt.txt


./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic --debug-start 34000000 configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 50000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 > qt_opt.txt


# for testing vnet 2
./build/Garnet_standalone/gem5.fast -d qt_fast_vnet2 configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2


./build/Garnet_standalone/gem5.opt --debug-start 30000000 -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 50000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 > qt_opt2.txt



./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 1000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 > qt_opt_early.txt


./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 10000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 --single-sender-id 3 --single-dest-id 10 > qt_opt_3_6_15.txt


./build/Garnet_standalone/gem5.opt --debug-start 20000000 -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 30000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 > qt_opt_20k_30k.txt


./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 100000 --injectionrate 1.0 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic --inj-vnet 2 --single-sender-id 3 --single-dest-id 10 > qt_opt_3_10.txt


# now do noci...
./build/Garnet_standalone/gem5.fast -d qt_fast_noci configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 9 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic

./build/Garnet_standalone/gem5.opt -d qt_opt_noci --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 9 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic



./build/Garnet_standalone/gem5.opt -d qt_opt_noci --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 20000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 9 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic > qt_opt_noci.txt


# gdb (ml gdb)
gdb build/Garnet_standalone/gem5.debug
run configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 9 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic

run --debug-break=3892 configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 9 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic


./build/Garnet_standalone/gem5.opt -d qt_opt --debug-flags RubyNetwork,GarnetSyntheticTraffic configs/auto_top/auto_top_synth.py --topology EscapeVirtualNetworks --noi_routers 20 --sim-cycles 4000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_bsorm_zindexed.nrl --ruby --num-dirs 20 --mem_or_coh coh --mem-size 536870900 --num-cpus 20 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 5 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 4 --synth_traffic > qt_opt.txt


./build/Garnet_standalone/gem5.fast -d qt_fast_noci configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 2000000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 9 --synth_traffic

# noci deadlocks... lets debug
./build/Garnet_standalone/gem5.opt -d qt_opt_noci --debug-flags RubyNetwork,GarnetSyntheticTraffic --debug-start 28000000 configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 30000000 --injectionrate 0.2 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 1.8GHz --router_map_file configs/topologies/paper_solutions/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_noci_bsorm_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_noci_bsorm_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 8 --synth_traffic > qt_opt_noci.txt


# 
./build/Garnet_standalone/gem5.fast -d ./synth_outputs/noci/100k/mixed/coh/ns_l_bwop_noci/cload_zindexed/paths/0_05/ configs/auto_top/auto_top_synth.py --topology NoCI_EscapeVirtualNetworks --noi_routers 20 --sim-cycles 20000000000 --injectionrate 0.05 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 2.7GHz --router_map_file configs/topologies/paper_solutions/ns_l_bwop_noci.map --flat_vn_map_file configs/topologies/vn_maps/ns_l_bwop_noci_cload_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/ns_l_bwop_noci_cload_zindexed.nrl --ruby --num-dirs 64 --mem_or_coh coh --mem-size 536870900 --num-cpus 64 --network garnet --mem-type SimpleMemory --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 9 --synth_traffic



./build/X86/gem5.fast -d ./qt_fs_noci configs/auto_top/auto_top_fs.py -I 100000000 --benchmark_parsec blackscholes -r 1 --checkpoint-dir ./parsec_checkpoints/largemem/blackscholes --router_map_file configs/topologies/paper_solutions_noci/kite_large_noci.map --flat_vn_map_file configs/topologies/vn_maps/ns_l_bwop_noci_cload_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/ns_l_bwop_noci_cload_zindexed.nrl --topology FS_NoCI_EscapeVirtualNetworks --noi_routers 20 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 2.7GHz --num-cpus 64 --mem_or_coh mem --num-dirs 16 --num-l2caches 64 --l2_size 500kB --num_chiplets 4 --mem-size 32GB --caches --ruby --network garnet --kernel parsec_disk_image/vmlinux-4.4.186 --disk-image parsec_disk_image/x86-parsec --cpu-type X86O3CPU --restore-with-cpu X86O3CPU --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 9




./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_old.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup --work-begin-exit-count 1

./build/X86/gem5.fast -d ./test_kvm_multiprog_none configs/auto_top/auto_top_fs_multiprog.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/vmlinux-4.4.186 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup

./build/X86/gem5.fast -d ./test_kvm_multiprog_none configs/auto_top/auto_top_fs_multiprog.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/vmlinux-4.4.186 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup


./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_multiprog.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup --work-begin-exit-count 1


./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_kvm_loop.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup --work-begin-exit-count 1 


# good for testing
./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_kvm_loop.py --num-cpus 8 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec bodytrack --multi_prog --work-begin-exit-count 1


./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_kvm_loop.py --num-cpus 64 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup --multi_prog


./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_multiprog.py --num-cpus 64 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --first_parsec bodytrack --second_parsec dedup --multi_prog --work-begin-checkpoint-count 1 --checkpoint-at-end




## old one from heterogarnet


./build/X86/gem5.fast -d ./outputs/parsec_checkpoints_noci_32GB_64cpus_16dirs_linux54/swaptions configs/auto_top/at_fs_2.py --num-cpus 64 --num-dirs 16 --benchmark_parsec swaptions --ruby --kernel parsec-disk-image/vmlinux-5.4.49 --disk-image parsec-disk-image/x86-parsec --checkpoint-at-end --work-begin-exit-count 1 --cpu-type X86KvmCPU --mem-size 32GB


# April 3

# sag 1
./build/X86/gem5.fast -d ./test_20r_sag1 configs/auto_top/checkpoint_after_boot.py --num-cpus 20 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --work-begin-checkpoint-count 1

# sag 3
./build/X86/gem5.fast -d ./test_20r_sag3 configs/auto_top/checkpoint_after_boot.py --num-cpus 20 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --work-begin-checkpoint-count 1 --checkpoint-at-end



# restoring 20r
./build/X86/gem5.fast -d ./test_20r_sag3_restore configs/auto_top/auto_top_fs.py -I 100000000 -r 1 --checkpoint-dir ./test_20r_sag3 --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_cload_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_cload_zindexed.nrl --topology FS_EscapeVirtualNetworks --noi_routers 20 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 2.7GHz --num-cpus 20 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --ruby --network garnet --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86O3CPU --restore-with-cpu X86O3CPU --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 9


./build/X86/gem5.fast -d ./test_20r_sag3_restore configs/auto_top/auto_top_fs.py -I 100000000 -r 1 --checkpoint-dir ./test_20r_sag3 --router_map_file configs/topologies/paper_solutions/kite_large.map --flat_vn_map_file configs/topologies/vn_maps/kite_large_cload_zindexed_paths.vn --flat_nr_map_file configs/topologies/nr_list/kite_large_cload_zindexed.nrl --topology FS_EscapeVirtualNetworks --noi_routers 20 --noc_clk 1.8GHz --sys-clock 1.8GHz --ruby-clock 1.8GHz --noi_clk 2.7GHz --num-cpus 20 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --ruby --network garnet --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --restore-with-cpu X86KvmCPU --routing-algorithm 2 --use_escape_vns --vcs-per-vnet 10 --evn_deadlock_partition 1 --evn_n_deadlock_free 1 --evn_min_n_deadlock_free 9



# very simple
# w/ ruby?
./build/X86/gem5.fast -d ./test_20r_sag3_restore configs/auto_top/auto_top_fs.py -I 100 -r 1 --checkpoint-dir ./test_20r_sag3_v3 --noi_routers 20 --num-cpus 20 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --restore-with-cpu X86KvmCPU


./build/X86/gem5.fast -d ./test_20r_sag3_v3 configs/auto_top/checkpoint_after_boot.py --num-cpus 20 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --work-begin-checkpoint-count 1 --checkpoint-at-end --l2_size 500kB --caches --num-l2caches 20

# very simple
# w/o ruby?
./build/X86/gem5.fast -d ./test_20r_sag3_restore_noruby configs/auto_top/auto_top_fs.py -r 1 --checkpoint-dir ./test_20r_sag3_noruby --noi_routers 20 --num-cpus 20 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --restore-with-cpu X86KvmCPU


./build/X86/gem5.fast -d ./test_20r_sag3_noruby configs/auto_top/checkpoint_after_boot.py --num-cpus 20 --num-dirs 16 --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --work-begin-checkpoint-count 1 --checkpoint-at-end --l2_size 500kB --caches --num-l2caches 20

# checkpoint no ruby, restore ruby? yes
./build/X86/gem5.fast -d ./test_20r_sag3_restore_ruby configs/auto_top/auto_top_fs.py --checkpoint-restore 1 --checkpoint-dir ./test_20r_sag3_noruby --noi_routers 20 --num-cpus 20 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --restore-with-cpu X86KvmCPU --ruby

# checkpoint no ruby, restore ruby
# checkpoint 20r, restore 64r? no. the restored system will have # cpus = # cpus while checkpointing
./build/X86/gem5.fast -d ./test_20r_sag3_restore_ruby_NoCI configs/auto_top/auto_top_fs.py --checkpoint-restore 1 --checkpoint-dir ./test_20r_sag3_noruby --noi_routers 20 --num-cpus 64 --mem_or_coh mem --num-dirs 16 --l2_size 500kB --mem-size 32GB --caches --num-l2caches 20 --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --restore-with-cpu X86KvmCPU --ruby



./build/X86/gem5.fast -d ./test_kvm_multiprog configs/auto_top/auto_top_fs_multiprog.py --num-cpus 64 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --benchmark_parsec bodytrack --repeated_multi_prog 4 --work-begin-checkpoint-count 1 --checkpoint-at-end




# idea:
# prioritize high load benchmarks:
# 1) bodytrack
# 

# for each high load benchmark, get chkpt for:
# a) no ruby, 64 cpu, 64 l2caches (500kB), 16 dirs, 128BG memory
# b) ruby + garnet params passed, full 64 cpus sys as well

# try various repetitions
# i) 4 repetitions (16 cpus per program)

# 1ai)
./build/X86/gem5.fast -d ./parsec_noci_checkpoints/bodytrack/no_ruby/4reps configs/auto_top/auto_top_fs_multiprog.py --num-cpus 64 --num-dirs 16 --ruby --kernel parsec_disk_image/x86-linux-kernel-4.19.83 --disk-image parsec_disk_image/x86-parsec --cpu-type X86KvmCPU --mem-size 32GB --benchmark_parsec bodytrack --repeated_multi_prog 4 --work-begin-checkpoint-count 1 --checkpoint-at-end